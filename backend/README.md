## BACKEND Docs

****
*4 сентября*

Изменил апку accounts на users. Extend базового юзера.\
Обновил settings.py, добавил апки и селери cases, packs, users.

Добавил роутер для всех апок.\
Добавил новые зависимости.\
Добавил медиа с заглушкой для аватарки пользователя.\
Добавил сериализаторы.

Добавил в core клиент celery с beat таской которая запускается через cron раз в определенное время

**Для работы воркера:**\
`cd backend` \
`celery -A core.celery worker -l INFO`

**Для работы beatа:**\
`cd backend`\
`celery -A core.celery beat -l INFO`

`CRON_MINUTES` - сюда указывать раз в сколько минут будет запускаться таска\

****

*5 сентября*

Добавлена функция update_sticker_prices. Она запускает функции апдейта цен для стикеров от определенного contributor (
Sticker Packs, Fuse и тд). Результаты функций объединяет и отправляет в функцию rebalance_changes().

Исправлена логика в апдейте цен стикеров от Sticker Pack. Если у паков из разных коллекций могли быть одинаковые
названия, происходили артефакты. Также свел все патчи к одному большому bulk_update во вью.\

Добавил обработку статусов в calculate_case_prices().

Пофиксил конфиг селери и его импорты. Поменял таску.

Добавил пагинацию в 2 объекта при обращении на /api/cases/.

****
*6 сентября*

Добавил ENDPOINTS.md для документации эндпоинтов
****
*9 сентября*

Переделал алгоритм rebalance_changes, добавил хардкод конфигурацию на выпадение дешевых/редких/дорогих айтемов.

Объединил эндпоинты update-fee и update-price в один эндпоинт cases-update с bulk_update. Добавил bulk_update для
update-changes

Пофиксил роутинг вьюх в cases
****
*13 сентября*

Добавлено приложение wallet, в него перенесены модели Deposit и Withdraw из users. Сделаны вью для подтверждения и
добавления кошелька пользователя в систему. Добавлен сериализатор для проверки подлинности подписи.

Добавлена директория shared с модулем cache, который содержит в себе кэш сервис для работы с кэшем.

В модель CustomUser добавлено новое поле wallet_connection_time.

Начал писать вью для депозитов.

Добавлен эндпоинт tonconnect-manifest.json для правильной работы ton connect на клиенте.

****
*15 сентября*
****

Добавлена фича с депозитами. Подключенно посторонее API TonConsole. Для каждого юзера создается отдельный инвойс который
он оплачивает. TonConsole возращает данные по вебхуку если статус инвойса был обновлен.



